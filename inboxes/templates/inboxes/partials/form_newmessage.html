{% load static %}
<div id="new-message-modal"
     class="fixed inset-0 z-[999] flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4">

    <div class="bg-white w-full max-w-md rounded-[2.5rem] shadow-2xl p-8 transform transition-all outline-none">

        <div class="flex items-center gap-4 mb-6">
            <img class="w-14 h-14 rounded-2xl object-cover shadow-sm border border-slate-50"
                 src="{% if recipient.profile.avatar %}{{ recipient.profile.avatar.url }}{% else %}{% static 'images/avatar_default.svg' %}{% endif %}"
                 alt="{{ recipient.username }}">
            <h3 class="text-xl font-black text-slate-800 tracking-tight font1 titleBlip">Message to {{ recipient.username }}</h3>
        </div>

        <form method="post" action="{% url 'inbox_newmessage' recipient.id %}">
            {% csrf_token %}
            <textarea name="message" required autofocus
                      placeholder="Write your message..."
                      class="w-full bg-slate-50 border-none rounded-2xl p-5 min-h-[120px] focus:ring-2 focus:ring-violet-500 focus:bg-white mb-4 resize-none transition-all outline-none text-slate-700 font-medium"></textarea>

            <div class="flex gap-3">
                <button type="submit"
                        class="flex-1 !bg-violet-600 !text-white !font-bold py-4 !rounded-2xl !hover:bg-violet-700 !active:scale-95 !transition-all !shadow-lg !shadow-violet-600/20">
                    Send Message
                </button>
                <button type="button"
                        _="on click add .hidden to #new-message-modal"
                        class="px-6 py-4 !bg-slate-100 !text-slate-500 !font-bold !rounded-2xl !hover:bg-slate-200 !transition-colors">
                    Cancel
                </button>
            </div>
        </form>
    </div>
</div>