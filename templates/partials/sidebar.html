{% load static %}

<aside x-show="mobileSidebarOpen"
       x-cloak
       class="md:!block col-span-full md:col-span-1 lg:mr-[20%] order-1 md:order-2"
       x-transition:enter="duration-300 ease-out"
       x-transition:enter-start="opacity-0 -mt-96"
       x-transition:enter-end="opacity-100 mt-0">
    <section class="card p-4">
        <h2 class="font-bold">Categories</h2>
        <ul class="hoverlist">
            {% for tag in tags %}
                <li class="my-2 {% if current_tag == tag.slug %}highlight{% endif %}">
                    <a href="{% url 'home' %}?tag={{ tag.slug }}">
                        <img class="w-8 h-8 object-cover mr-2"
                             src="{% if tag and tag.icon %}{{ tag.icon.url }}{% else %} {% static 'images/icon_landscape.svg' %} {% endif %}">
                        <span class="font-bold text-sm">{{ tag.name }}</span>
                    </a>
                </li>
            {% endfor %}
        </ul>
    </section>
    <section class="card p-4">
        <div class="flex items-center">
            <img class="w-7 mr-2"
                 src="{% static 'images/fireheart_black.svg' %}" />
            <h2 class="font-bold my-2">Top Posts</h2>
        </div>
        <ul class="hoverlist">
            {% for top_post in top_posts %}
                <li>
                    <a class="flex items-stretch justify-between">
                        <div class="flex items-center truncate">
                            <img class="w-10 h-10 rounded-lg object-cover mr-3 shrink-0"
                                 src="{% if top_post.image %}{{ top_post.image.url }}{% else %}{% static 'images/icon_landscape.svg' %}{% endif %}   ">
                            <img class="w-4 h-4 rounded-full object-cover mr-1 mt-1"
                                 src="{% static 'images/avatar_default.svg' %}">
                            <span class="font-bold text-sm mr-1">{{ top_post.user.username }}</span>
                        </div>
                        <span class="text-sm font-light text-grey-500 shrink-0">{{ top_post.likes.count }} Like{{ top_post.likes.count|pluralize:'s' }}</span>
                    </a>
                </li>
            {% empty %}
                <li class="m-4">No top posts yet.</li>
            {% endfor %}
        </ul>
    </section>
</aside>
