{% load static %}
{% load i18n %}

<header class="flex justify-between items-center w-full bg-slate-900 h-20 text-white sticky top-0 z-40 px-8">

    <div class="flex items-center">
        <logo>
            <a class="flex items-center gap-2" href="{% url 'home' %}">
                <img class="w-7" src="{% static 'images/fireheart_white.svg' %}" alt="Jnestagram-logo"/>
                <span class="text-xl font-bold font-lobster">{% trans "Jnestagram" %}</span>
            </a>
        </logo>
    </div>

    <nav class="flex items-center">
        <ul class="flex items-center gap-6">
            <li>{% include 'partials/switch_language.html' %}</li>

            {% if not user.is_authenticated %}
            <li>{% include 'partials/buttons/login.html' %}</li>
            {% else %}
            <li x-data="{ dropdownOpen: false }" class="relative">
                <a @click="dropdownOpen = !dropdownOpen" @click.away="dropdownOpen = false"
                   class="flex items-center gap-2 cursor-pointer select-none">

                    <div class="relative w-8 h-8">
                        {% if pending_comments_count|add:unread_messages_count > 0 %}
                        <span class="badge-ping">
                            <span class="animate-ping absolute h-full w-full rd-full bg-primary opacity-75"></span>
                            <span class="relative h-4 w-4 rd-full bg-primary flex items-center justify-center">
                                <span text="[10px]" class="font-bold text-white">{{ pending_comments_count|add:unread_messages_count }}</span>
                            </span>
                        </span>
                        {% endif %}
                        <img class="h-full w-full rd-full object-cover shadow-sm"
                             src="{{ request.user.profile.avatar_url }}"
                             alt="{{ request.user.username }}-avatar"/>
                    </div>

                    <span class="text-sm font-bold font-lobster hidden sm:block">{{ request.user.username }}</span>
                    <img :class="dropdownOpen && 'rotate-180'" class="duration-300 w-4"
                         src="https://img.icons8.com/small/32/777777/expand-arrow.png"
                         alt="expand-arrow-icon" />
                </a>

                <div x-show="dropdownOpen" x-cloak class="dropdown-card absolute right-0 mt-2 w-48 bg-slate-800 rounded-xl shadow-xl p-2 z-50"
                     x-transition:enter="duration-200 ease-out"
                     x-transition:enter-start="opacity-0 scale-95"
                     x-transition:enter-end="opacity-100 scale-100">
                    <ul class="flex flex-col gap-1">
                        <li>{% include 'partials/buttons/create_post.html' %}</li>
                        <li>{% include 'partials/buttons/my_profile.html' %}</li>
                        <li>{% include 'partials/buttons/inbox.html' %}</li>
                        <hr class="border-white/5 my-1">
                        <li>{% include 'partials/buttons/logout.html' %}</li>
                    </ul>
                </div>
            </li>
            {% endif %}

            <li>{% include 'partials/buttons/about.html' %}</li>
        </ul>
    </nav>

</header>