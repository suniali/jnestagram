{% load i18n %}
<div class="fixed top-5 right-5 z-[100] flex flex-col gap-4 w-full max-w-[350px]">
    {% if messages %}
        {% for message in messages %}
            <div x-data="{ show: true, progress: 100 }"
                 x-show="show"
                 x-init="
                    let timer = setInterval(() => {
                        progress -= 1;
                        if (progress <= 0) {
                            clearInterval(timer);
                            show = false;
                        }
                    }, 50); // 5000ms / 100 = 50ms
                 "
                 x-transition:enter="transition ease-out duration-500"
                 x-transition:enter-start="opacity-0 scale-90 translate-x-10"
                 x-transition:enter-end="opacity-100 scale-100 translate-x-0"
                 x-transition:leave="transition ease-in duration-300"
                 x-transition:leave-start="opacity-100 translate-x-0"
                 x-transition:leave-end="opacity-0 translate-x-10"
                 class="relative overflow-hidden backdrop-blur-md bg-white/90 p-4 rounded-2xl shadow-[0_10px_30px_rgba(0,0,0,0.1)] border border-white/50 flex items-start gap-3">

                <div class="flex-shrink-0">
                    {% if message.tags == 'success' %}
                        <div class="p-2 bg-emerald-100 text-emerald-600 rounded-xl">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                        </div>
                    {% elif message.tags == 'error' %}
                        <div class="p-2 bg-rose-100 text-rose-600 rounded-xl">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                        </div>
                    {% else %}
                        <div class="p-2 bg-blue-100 text-blue-600 rounded-xl">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                        </div>
                    {% endif %}
                </div>

                <div class="flex-1 pt-0.5">
                    <p class="text-xs font-black tracking-wider opacity-50 mb-0.5">
                        {{ message.tags|default:"Message" }}
                    </p>
                    <p class="text-sm font-semibold text-slate-700 leading-relaxed">
                        {% blocktrans %} {{ message }} {% endblocktrans %}
                    </p>
                </div>

                <button @click="show = false" class="text-slate-400 hover:text-slate-600 transition-colors p-1">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>

                <div class="absolute bottom-0 left-0 h-1 bg-current opacity-20 transition-all ease-linear"
                     :style="`width: ${progress}%;`"
                     class="{% if message.tags == 'success' %}text-emerald-500{% elif message.tags == 'error' %}text-rose-500{% else %}text-blue-500{% endif %}">
                </div>
            </div>
        {% endfor %}
    {% endif %}
</div>